(function(a,b){a.widget("ui_add.defaulttext",{options:{baseClass:"ui_add-defaulttext",behavior:"chrome",defaultText:""},_create:function(){var c=this;if(this._hasNativeSupport()){this.element.prop("placeholder",this.options.defaultText);return}if(this.element.is(":text")){this.type="text"}this.element.bind("paste",function(){var d=setTimeout(function(){clearTimeout(d);var e=c._getValue();c._setValue(e===""?c.options.defaultText:e)},0)}).closest("form").submit(function(){if(c.options.defaultText===""){return}if(!c.changed()){if(c.type==="text"){c.element.val("")}else{c.element.text("")}}});this._setBehavior(this.options.behavior);this._setValue(this.options.defaultText);if(typeof(this.options.disabled)!=="boolean"){this.options.disabled=!!this.element.attr("disabled")}else{this.element.attr("disabled",this.options.disabled)}},changed:function(){return this._getValue()!==""},destroy:function(){this.element.removeClass(this.options.baseClass);a.Widget.prototype.destroy.call(this)},_getValue:function(){var c=this.type==="text"?this.element.val():this.element.text();if(this.options.defaultText===""){return c}if(this.options.defaultText===c){return""}return c},_setValue:function(c){if(c===this.options.defaultText){if(this.type==="text"){this.element.val(c)}else{this.element.text(c)}this.element.addClass(this.options.baseClass)}else{if(this.type==="text"){this.element.val(c)}else{this.element.text(c)}this.element.removeClass(this.options.baseClass)}},val:function(){if(arguments.length){this._setValue(arguments[0]===""?this.options.defaultText:arguments[0])}else{return this._getValue()}},widget:function(){return this.element},_hasNativeSupport:function(){return this.element.prop("placeholder")!==b},_setBehavior:function(f){function e(g){switch(g){case a.ui.keyCode.BACKSPACE:case a.ui.keyCode.DELETE:case a.ui.keyCode.DOWN:case a.ui.keyCode.END:case a.ui.keyCode.ENTER:case a.ui.keyCode.ESCAPE:case a.ui.keyCode.HOME:case a.ui.keyCode.LEFT:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.UP:return true;default:return false}}if(this._hasNativeSupport()){return false}var d=(f==="chrome"?[null,"focusin.","focusout.","keydown.","keyup."," blur."]:["keydown.","keyup."," blur.","focusin.","focusout.",null]),c=this;if(d[0]){this.element.unbind(d[0]+this.widgetName)}this.element.unbind(d[1]+this.widgetName).unbind(d[2]+this.widgetName).bind(d[3]+this.widgetName,function(g){if(c.options.disabled||(c.options.defaultText==="")){return false}if(!c.changed()){if(f==="chrome"){if(e(g.keyCode)||(g.altKey&&(g.keyCode===18))||(g.ctrlKey&&(g.keyCode===17))||(g.shiftKey&&(g.keyCode===16))){return false}if(g.keyCode===a.ui.keyCode.TAB){return}}c._setValue("")}}).bind(d[4]+this.widgetName+(d[5]?" "+d[5]+this.widgetName:""),function(g){if(c.options.disabled||(c.options.defaultText==="")){return false}if(!c.changed()){c._setValue(c.options.defaultText)}})},_setOption:function(c,e){if((c==="baseClass")&&this.element.hasClass(this.options.baseClass)){this.element.removeClass(this.options.baseClass).addClass(e)}else{if(c==="behavior"){this._setBehavior(e)}else{if(c==="defaultText"){var d=this._getValue();this.options.defaultText=e;if(d===""){self._setValue(self.options.defaultText)}}}}a.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery));